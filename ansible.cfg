[defaults]
# Basic Configuration
inventory = inventories/production
host_key_checking = False
retry_files_enabled = False
stdout_callback = yaml
bin_ansible_callbacks = True
callback_whitelist = timer, profile_tasks, profile_roles

# Performance Optimization - Production-grade settings for 30+ VPN servers
forks = 30
serial = 10
gathering = smart
fact_caching = jsonfile
fact_caching_timeout = 86400
fact_caching_connection = /tmp/ansible_facts_cache
gather_subset = !hardware,!facter,!ohai
inject_facts_as_vars = False
hash_behaviour = merge
jinja2_extensions = jinja2.ext.do,jinja2.ext.i18n

# SSH Configuration - Enhanced for production deployment
timeout = 60
connect_timeout = 30
remote_user = ansible
private_key_file = ~/.ssh/ansible_ed25519
ansible_ssh_pipelining = True
host_key_auto_add = True
transport = smart

# Logging and Output - Production logging
log_path = logs/ansible.log
display_skipped_hosts = False
display_ok_hosts = True
display_args_to_stdout = False
force_color = True

# Vault Configuration - Enhanced vault support with multiple identities
vault_password_file = .vault_password
vault_identity_list = default@.vault_password,prod@.vault_password_prod

# Roles and Collections - Enhanced paths
roles_path = roles:collections:~/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles
collections_path = collections:~/.ansible/collections:/usr/share/ansible/collections

# Error Handling - Production-grade error handling
any_errors_fatal = False
max_fail_percentage = 10

[ssh_connection]
ssh_args = -C -o ControlMaster=auto -o ControlPersist=300s -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -o ServerAliveInterval=60 -o ServerAliveCountMax=3
pipelining = True
control_path_dir = /tmp/.ansible-cp
control_path = %(directory)s/ansible-%%h-%%p-%%r
retries = 3

[persistent_connection]
connect_timeout = 60
command_timeout = 120

[privilege_escalation]
become = True
become_method = sudo
become_user = root
become_ask_pass = False
become_flags = -H -S -n

[inventory]
enable_plugins = host_list, script, auto, yaml, ini, toml

[galaxy]
server_list = galaxy, automation_hub

[galaxy_server.galaxy]
url = https://galaxy.ansible.com/

[galaxy_server.automation_hub]
url = https://console.redhat.com/api/automation-hub/

[paramiko_connection]
record_host_keys = False
proxy_command = none

[winrm_connection]
# Windows connection settings (if needed for mixed environments)
connection_timeout = 60
read_timeout = 70

[module_defaults]
# Default settings for common modules to improve performance
copy:
  backup: no
template:
  backup: no
lineinfile:
  backup: no
blockinfile:
  backup: no