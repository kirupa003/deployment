---
# Global variables for all VPN servers
# Production environment configuration

# Infrastructure metadata
vpn_infrastructure:
  version: "2.0.0"
  deployment_date: "2025-01-05"
  environment: "production"
  total_servers: 30
  regions: ["europe", "north_america", "asia_pacific"]

# System configuration
system:
  timezone: "UTC"
  ntp_servers:
    - "pool.ntp.org"
    - "time.google.com"
  locale: "en_US.UTF-8"
  
# SSH configuration
ssh:
  port: 22
  allow_root_login: false
  password_authentication: false
  permit_empty_passwords: false
  max_auth_tries: 3
  client_alive_interval: 300
  client_alive_count_max: 2

# Security settings
security:
  hardening_enabled: true
  fail2ban_enabled: true
  crowdsec_enabled: true
  ufw_enabled: true
  automatic_updates: true
  
# Monitoring configuration
monitoring:
  enabled: true
  node_exporter:
    enabled: true
    port: 9100
    listen_address: "0.0.0.0"
  promtail:
    enabled: true
    loki_url: "http://loki.monitoring.local:3100"
  grafana:
    enabled: false  # Centralized instance
    
# DNS configuration
dns:
  coredns:
    enabled: true
    port: 53
    upstream_servers:
      - "1.1.1.1"
      - "8.8.8.8"
      - "9.9.9.9"
    adblock_enabled: true
    cache_size: 10000
    
# Logging configuration
logging:
  level: "INFO"
  retention_days: 30
  max_size: "100MB"
  fluent_bit:
    enabled: true
    output_type: "loki"
    
# Backup configuration
backup:
  enabled: true
  retention_days: 7
  s3_bucket: "vpn-infrastructure-backups"
  
# Update configuration
updates:
  automatic_security_updates: true
  reboot_if_required: false
  update_time: "03:00"
  
# Performance tuning
performance:
  kernel_parameters:
    net.core.rmem_max: 134217728
    net.core.wmem_max: 134217728
    net.ipv4.udp_rmem_min: 8192
    net.ipv4.udp_wmem_min: 8192
    net.core.netdev_max_backlog: 5000
    net.ipv4.ip_forward: 1
    
# Firewall base rules
firewall:
  default_policy: "deny"
  allow_ssh: true
  allow_ping: true
  rate_limiting: true