[defaults]
# Production-specific Configuration for VPN Infrastructure
# Use with: ansible-playbook -i inventories/production --config-file ansible-production.cfg

inventory = inventories/production
host_key_checking = False
retry_files_enabled = False
stdout_callback = yaml
bin_ansible_callbacks = True
callback_whitelist = timer, profile_tasks, profile_roles

# Production Performance Optimization - Tuned for 30+ VPN servers
forks = 30
serial = 15
gathering = smart
fact_caching = jsonfile
fact_caching_timeout = 86400
fact_caching_connection = /tmp/ansible_facts_cache_prod
gather_subset = !hardware,!facter,!ohai
inject_facts_as_vars = False
hash_behaviour = merge
jinja2_extensions = jinja2.ext.do,jinja2.ext.i18n

# Production SSH Configuration
timeout = 90
connect_timeout = 45
remote_user = ansible
private_key_file = ~/.ssh/ansible_ed25519
ansible_ssh_pipelining = True
host_key_auto_add = False
transport = smart

# Production Logging
log_path = logs/ansible-production.log
display_skipped_hosts = False
display_ok_hosts = True
display_args_to_stdout = False
force_color = False

# Production Vault Configuration
vault_password_file = .vault_password_prod
vault_identity_list = prod@.vault_password_prod,staging@.vault_password_staging

# Production Paths
roles_path = roles:collections:~/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles
collections_path = collections:~/.ansible/collections:/usr/share/ansible/collections

# Production Error Handling
any_errors_fatal = True
max_fail_percentage = 5

[ssh_connection]
ssh_args = -C -o ControlMaster=auto -o ControlPersist=600s -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -o ServerAliveInterval=60 -o ServerAliveCountMax=5
pipelining = True
control_path_dir = /tmp/.ansible-cp-prod
control_path = %(directory)s/ansible-prod-%%h-%%p-%%r
retries = 5

[persistent_connection]
connect_timeout = 90
command_timeout = 180

[privilege_escalation]
become = True
become_method = sudo
become_user = root
become_ask_pass = False
become_flags = -H -S -n

[inventory]
enable_plugins = host_list, script, auto, yaml, ini, toml

[galaxy]
server_list = galaxy, automation_hub

[galaxy_server.galaxy]
url = https://galaxy.ansible.com/

[galaxy_server.automation_hub]
url = https://console.redhat.com/api/automation-hub/

[module_defaults]
# Production defaults for common modules
copy:
  backup: yes
  validate: yes
template:
  backup: yes
  validate: yes
lineinfile:
  backup: yes
  validate: yes
blockinfile:
  backup: yes
  validate: yes
service:
  enabled: yes
systemd:
  enabled: yes
  daemon_reload: yes