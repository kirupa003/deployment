# Alert Rules Configuration
# Generated by Ansible - Do not edit manually

apiVersion: 1

groups:
  - name: vpn_infrastructure_alerts
    orgId: 1
    folder: VPN Monitoring
    interval: 1m
    rules:
{% for rule in monitoring_alert_rules %}
      - uid: {{ rule.name | lower | replace(' ', '_') }}
        title: {{ rule.name }}
        condition: A
        data:
          - refId: A
            queryType: ''
            relativeTimeRange:
              from: 300
              to: 0
            datasourceUid: victoriametrics
            model:
              expr: {{ rule.condition }}
              interval: ''
              refId: A
        noDataState: NoData
        execErrState: Alerting
        for: {{ rule.duration }}
        annotations:
          summary: "{{ rule.name }} on {{ '{{' }} $labels.instance {{ '}}' }}"
          description: "Alert condition: {{ rule.condition }}"
        labels:
          severity: {{ rule.severity }}
          team: vpn_infrastructure

{% endfor %}