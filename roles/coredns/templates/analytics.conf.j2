# CoreDNS Analytics Configuration
# Generated by Ansible - Do not edit manually

# DNS query analytics settings
analytics {
    # Export interval for metrics
    export_interval {{ coredns_analytics_export_interval }}
    
    # Query logging format
    log_format {{ coredns_log_format }}
    
    # Metrics to collect
    metrics {
        query_count
        query_duration
        response_size
        client_subnet
        query_type
        response_code
    }
    
    # Privacy settings
    privacy {
        # Anonymize client IPs (keep first 3 octets for IPv4, first 4 groups for IPv6)
        anonymize_ips true
        
        # Don't log queries for these domains
        exclude_domains [
            "localhost",
            "local"
        ]
    }
}