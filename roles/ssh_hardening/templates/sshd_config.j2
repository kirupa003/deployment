# SSH daemon configuration
# Generated by Ansible - DO NOT EDIT MANUALLY

# Basic configuration
Port {{ ssh_port }}
{% if ssh_listen_address != "0.0.0.0" %}
ListenAddress {{ ssh_listen_address }}
{% endif %}
Protocol {{ ssh_protocol }}
AddressFamily {{ ssh_address_family }}

# Host keys
{% for key in ssh_host_keys %}
HostKey {{ key.file }}
{% endfor %}

# Cryptographic settings
{% if ssh_ciphers %}
Ciphers {{ ssh_ciphers | join(',') }}
{% endif %}
{% if ssh_macs %}
MACs {{ ssh_macs | join(',') }}
{% endif %}
{% if ssh_kex_algorithms %}
KexAlgorithms {{ ssh_kex_algorithms | join(',') }}
{% endif %}
{% if ssh_host_key_algorithms %}
HostKeyAlgorithms {{ ssh_host_key_algorithms | join(',') }}
{% endif %}
{% if ssh_pubkey_accepted_algorithms %}
PubkeyAcceptedAlgorithms {{ ssh_pubkey_accepted_algorithms | join(',') }}
{% endif %}

# Authentication settings
PermitRootLogin {{ ssh_permit_root_login }}
PasswordAuthentication {{ ssh_password_authentication }}
PubkeyAuthentication {{ ssh_pubkey_authentication }}
AuthorizedKeysFile {{ ssh_authorized_keys_file }}
ChallengeResponseAuthentication {{ ssh_challenge_response_authentication }}
UsePAM {{ ssh_pam_authentication }}
KerberosAuthentication {{ ssh_kerberos_authentication }}
GSSAPIAuthentication {{ ssh_gssapi_authentication }}
HostbasedAuthentication {{ ssh_hostbased_authentication }}
PermitEmptyPasswords {{ ssh_permit_empty_passwords }}
PermitUserEnvironment {{ ssh_permit_user_environment }}
StrictModes {{ ssh_strict_modes }}

# Connection settings
MaxAuthTries {{ ssh_max_auth_tries }}
MaxSessions {{ ssh_max_sessions }}
MaxStartups {{ ssh_max_startups }}
LoginGraceTime {{ ssh_login_grace_time }}
ClientAliveInterval {{ ssh_client_alive_interval }}
ClientAliveCountMax {{ ssh_client_alive_count_max }}
TCPKeepAlive {{ ssh_tcp_keep_alive }}

# Logging
LogLevel {{ ssh_log_level }}
SyslogFacility {{ ssh_syslog_facility }}
UseDNS {{ ssh_use_dns }}

# Security features
UsePrivilegeSeparation {{ ssh_use_privilege_separation }}
Compression {{ ssh_compression }}
X11Forwarding {{ ssh_x11_forwarding }}
{% if ssh_x11_forwarding == "yes" %}
X11DisplayOffset {{ ssh_x11_display_offset }}
X11UseLocalhost {{ ssh_x11_use_localhost }}
{% endif %}
AllowAgentForwarding {{ ssh_agent_forwarding }}
AllowTcpForwarding {{ ssh_tcp_forwarding }}
GatewayPorts {{ ssh_gateway_ports }}
PermitTunnel {{ ssh_permit_tunnel }}
PermitTTY {{ ssh_permit_tty }}
PrintMotd {{ ssh_print_motd }}
PrintLastLog {{ ssh_print_last_log }}

# Banner
{% if ssh_banner_enabled %}
Banner {{ ssh_banner }}
{% else %}
Banner none
{% endif %}

# User and group restrictions
{% if ssh_allow_users %}
AllowUsers {{ ssh_allow_users | join(' ') }}
{% endif %}
{% if ssh_deny_users %}
DenyUsers {{ ssh_deny_users | join(' ') }}
{% endif %}
{% if ssh_allow_groups %}
AllowGroups {{ ssh_allow_groups | join(' ') }}
{% endif %}
{% if ssh_deny_groups %}
DenyGroups {{ ssh_deny_groups | join(' ') }}
{% endif %}

# Subsystems
{% for subsystem in ssh_subsystems %}
Subsystem {{ subsystem }}
{% endfor %}

# Custom configuration
{% for section, options in ssh_custom_options.items() %}

{{ section }}
{% for option in options %}
    {{ option }}
{% endfor %}
{% endfor %}